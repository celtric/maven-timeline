<html>
<head>
  <title>Maven Timeline</title>
  <script src="maven-timeline.js" type="text/javascript"></script>
  <script src="database.js" type="text/javascript"></script>
  <script src="timeline.js" type="text/javascript"></script>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script>
  <script>
    function onLoad() {
      var timelineData = window.timelineData;
      if(timelineData == undefined) {
        $.ajax({
          url: "maven-timeline.json",
          dataType: "json",
          async: false
        }).done(function (data) {
          timelineData = data
        });
      }
      timeLineDb = new TimeLineDb(timelineData);
      timeLine = new TimeLine(timelineData);

      timeLine.render(2);

      timeLineDb.getPhases(function(tx, rs) {
        for (var i = 0; i < rs.rows.length; i++) {
          var phase = rs.rows.item(i).phase;
          timeLineDb.getTotalPhaseDuration(phase, function (duration, phase) {
                var test = document.createElement("div");
                test.innerText = phase + " " + duration;
                document.getElementsByTagName("aside")[0].appendChild(test);
            });
        }
      });
      timeLineDb.getGoals(function(tx, rs) {
        for (var i = 0; i < rs.rows.length; i++) {
          var goal = rs.rows.item(i).goal;
          timeLineDb.getTotalGoalDuration(goal, function (duration, goal) {
                var test = document.createElement("div");
                test.innerText = goal + " " + duration;
                document.getElementsByTagName("aside")[0].appendChild(test);
            });
        }
      });
      timeLineDb.getArtifactIds(function(tx, rs) {
        for (var i = 0; i < rs.rows.length; i++) {
          var artId = rs.rows.item(i).artifactId;
          timeLineDb.getTotalArtifactDuration(artId, function (duration, artId) {
                var test = document.createElement("div");
                test.innerText = artId + " " + duration;
                document.getElementsByTagName("aside")[0].appendChild(test);
            });
        }
      });
    }
  </script>
  <link rel="stylesheet" type="text/css" href="style.css"></link>
</head>
<body onload="onLoad();">
<aside></aside>
<main></main>
</body>
</html>
